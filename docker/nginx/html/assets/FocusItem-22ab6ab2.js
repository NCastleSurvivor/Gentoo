import{b as R,a as B,_ as E}from"./index-429ff8e5.js";/* empty css                   */import{g as U,i as V,m as x}from"./index-57f530b0.js";import{d as D,B as $,f as a,e as j,w as A,g as H,W as k,M as l,C as _,N as p,I as v,D as t,V as b,u as O,H as m,$ as C,T as P,Y as T,O as W,P as Y}from"./element-plus-dc5e6ec0.js";const F=i=>(W("data-v-94ee4b01"),i=i(),Y(),i),q={class:"focusitem-wrap"},z={style:{display:"flex","align-items":"center"}},G=["href"],J=["src"],K={style:{margin:"20px 0 0 20px"}},Q={class:"username"},X={class:"details"},Z={key:0},ee=F(()=>t("span",null,"已关注",-1)),se=[ee],te=F(()=>t("span",null,"未关注",-1)),oe=[te],ae=D({__name:"FocusItem",props:{user_id:{}},setup(i){const r=i,{user_id:L}=$(r),S=R(),{userStore:u}=B(),d=a(!1),n=a(!1),y=a(""),h=a(""),g=a(""),o=a(!1),f=a(!1),M=j(()=>window.location.origin+"/personalCenter/"+L.value),w=async s=>{switch(s){case 0:{n.value=!0;const e=await x({first_user_id:u.userInfo.user_id,second_user_id:r.user_id,action_type:s});n.value=!1,e.result_code===0&&(o.value=!o.value,C({type:"success",message:"关注成功"}));break}case 1:{n.value=!0;const e=await x({first_user_id:u.userInfo.user_id,second_user_id:r.user_id,action_type:s});n.value=!1,e.result_code===0&&(o.value=!o.value,C({type:"success",message:"取消关注成功"}));break}}};return A(()=>S.params.user_id,(s,e)=>{Number(s)===u.userInfo.user_id&&(f.value=!0)},{immediate:!0}),H(async()=>{d.value=!0;const s=await U({user_id:r.user_id});if(s.result_code===0&&(y.value=s.result.name,h.value=s.result.signature,g.value=s.result.headphoto,u.isLogin)){const e=await V({user_id:u.userInfo.user_id});e.result_code===0&&e.result.forEach(c=>{c.second_user_id===r.user_id&&(o.value=!0)})}d.value=!1}),(s,e)=>{const c=P,I=T;return k((l(),_("div",q,[p(c,{type:"flex",justify:"space-between",style:{"align-items":"center"}},{default:v(()=>[t("div",z,[t("div",null,[t("a",{href:M.value},[t("img",{src:g.value},null,8,J)],8,G)]),t("div",K,[p(c,{style:{margin:"0 0 10px"}},{default:v(()=>[t("span",Q,b(y.value),1)]),_:1}),p(c,null,{default:v(()=>[t("span",X,"自我介绍："+b(h.value),1)]),_:1})])]),O(u).isLogin?k((l(),_("div",Z,[o.value&&f.value?(l(),_("div",{key:0,class:"is-my-focus",onClick:e[0]||(e[0]=N=>w(1))},se)):m("",!0),!o.value&&f.value?(l(),_("div",{key:1,class:"is-my-focus",onClick:e[1]||(e[1]=N=>w(0))},oe)):m("",!0)])),[[I,n.value]]):m("",!0)]),_:1})])),[[I,d.value]])}}});const ce=E(ae,[["__scopeId","data-v-94ee4b01"]]);export{ce as F};

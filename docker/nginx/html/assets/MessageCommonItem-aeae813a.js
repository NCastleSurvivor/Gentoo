import{f as C,_ as T}from"./index-429ff8e5.js";import{f as b}from"./index-9b3e9b96.js";import{a as B}from"./MessageEmpty-30652268.js";import{d as E,B as D,e as r,M as d,C as l,N as o,I as t,D as e,u as a,V as i,H as I,a7 as H,a0 as L,$ as m,T as N,Q as V,R as k,K as R}from"./element-plus-dc5e6ec0.js";const A={class:"messagecommonitem-wrap"},j={class:"part1"},K=["href"],Q=["src"],S={class:"details"},U=["href"],$={class:"clickable"},q=["innerHTML"],z={class:"details-date"},F={class:"part2"},G={key:0,class:"content"},J=["innerHTML"],O={class:"button"},P=["src"],W=E({__name:"MessageCommonItem",props:{message:{}},emits:["deleteMessage"],setup(p,{emit:u}){const f=p,{message:s}=D(f),h=u,g=r(()=>b(s.value.createdAt)),_=r(()=>{var n;return window.location.origin+"/personalCenter/"+((n=s.value.user_info)==null?void 0:n.user_id)}),v=async n=>{n==="delete"&&L.confirm("此操作将永久删除该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{(await C({message_id:s.value.message_id})).result_code===0?(m.success("删除成功!"),h("deleteMessage",s.value.message_id)):m.error("删除失败!")})};return(n,w)=>{const c=N,M=V,x=k,y=R;return d(),l("div",A,[o(c,{type:"flex",justify:"space-between"},{default:t(()=>[e("div",j,[e("a",{class:"headphoto",href:_.value},[e("img",{src:a(s).user_info.user_headphoto},null,8,Q)],8,K),e("div",S,[o(c,{type:"flex"},{default:t(()=>[e("a",{class:"details-content",href:_.value},[e("span",$,i(a(s).user_info.user_name),1)],8,U)]),_:1}),o(c,{type:"flex"},{default:t(()=>[e("span",{class:"details-inner",innerHTML:a(s).content},null,8,q)]),_:1}),o(c,{style:{"margin-top":"10px"},type:"flex"},{default:t(()=>[e("span",z,i(g.value),1)]),_:1})])]),e("div",F,[a(s).abstract?(d(),l("div",G,[e("span",{innerHTML:a(s).abstract},null,8,J)])):I("",!0),o(y,{onCommand:v},{dropdown:t(()=>[o(x,null,{default:t(()=>[o(M,{command:"delete"},{default:t(()=>[H("删除消息")]),_:1})]),_:1})]),default:t(()=>[e("div",O,[e("img",{src:a(B)},null,8,P)])]),_:1})])]),_:1})])}}});const se=T(W,[["__scopeId","data-v-2294defb"]]);export{se as M};

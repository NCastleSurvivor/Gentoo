import{_ as M,a as fe,p as te}from"./index-429ff8e5.js";/* empty css                   *//* empty css                 */import{g as ge,a as ye,b as ae}from"./index-a3c3f250.js";import{M as we,F as xe}from"./More-0711e136.js";import{d as N,e as H,M as _,C as d,N as a,I as l,D as e,u as s,V as m,Z as T,_ as j,H as E,T as R,O as D,P as U,f,g as F,W as ie,G as se,Y as re,w as ce,F as Le,$ as b,a0 as ke,Q as $e,R as Ie,K as be,a1 as He,a2 as Ee,n as O,o as Se,a3 as Ce}from"./element-plus-dc5e6ec0.js";import{i as Be}from"./index-e0333ef0.js";import{c as Ae,d as Me,e as le,f as oe}from"./index-57f530b0.js";import{f as ne}from"./index-9b3e9b96.js";import{L as Ne,C as Re,S as Te,a as je}from"./CommentBtn-22bdf200.js";import{u as De}from"./vue.f36acd1f-07939512.js";import"./constants-ff0dbeed.js";/* empty css                   */const Ue=c=>(D("data-v-e5738e79"),c=c(),U(),c),Fe={class:"newhomeitem-wrap"},Pe=["href"],Ge=["src"],Oe={style:{width:"235px"}},Ye=["href","title"],ze=["href","title"],Ke={class:"author-name"},Qe={class:"author-university",style:{"margin-left":"10px"}},We=Ue(()=>e("span",null,"标签：",-1)),Ze={class:"label-font"},qe={key:0},Je=N({__name:"NewHomeItem",props:{newsItem:{}},setup(c){const t=c,{article_id:o,author_id:p,author_name:u,author_headphoto:v,author_university:g,article_title:h,article_labels:i,article_introduce:r}=t.newsItem,y=H(()=>window.location.origin+"/articleHome/"+o),w=H(()=>window.location.origin+"/personalCenter/"+p);return($,S)=>{const x=R;return _(),d("div",Fe,[a(x,{type:"flex",justify:"space-between"},{default:l(()=>[e("a",{class:"author-head",href:w.value},[e("img",{src:s(v),alt:"author_head"},null,8,Ge)],8,Pe),e("div",Oe,[a(x,null,{default:l(()=>[e("a",{class:"article-title",href:y.value,target:"_blank",title:s(h)},[e("span",null,m(s(h)),1)],8,Ye)]),_:1}),a(x,null,{default:l(()=>[e("a",{class:"article-introduce",href:y.value,target:"_blank",title:s(r)},[e("span",null,m(s(r)),1)],8,ze)]),_:1})])]),_:1}),a(x,{type:"flex"},{default:l(()=>[e("div",null,[a(x,{style:{"margin-top":"5px"},type:"flex"},{default:l(()=>[e("span",Ke,m(s(u)),1),e("div",Qe,[e("span",null,m(s(g)),1)])]),_:1}),a(x,{style:{"margin-top":"5px","flex-flow":"row wrap"},type:"flex",class:"article-labels"},{default:l(()=>[We,(_(!0),d(T,null,j(s(i),(C,I)=>(_(),d("div",{key:I},[e("span",Ze,m(s(i)[I]),1)]))),128)),s(i).length===0?(_(),d("span",qe,"暂无相关标签")):E("",!0)]),_:1})])]),_:1})])}}});const Xe=M(Je,[["__scopeId","data-v-e5738e79"]]),Ve=c=>(D("data-v-3f864f60"),c=c(),U(),c),et={class:"homenewslist-wrap"},tt=Ve(()=>e("span",{class:"title"},"最新发布",-1)),at=N({__name:"HomeNewsList",setup(c){const t=f(!1),o=f([]);return F(async()=>{t.value=!0;const p=await ge();p.result_code===0&&(o.value=p.result),t.value=!1}),(p,u)=>{const v=R,g=re;return _(),d("div",et,[a(v,null,{default:l(()=>[tt]),_:1}),ie((_(),se(v,{style:{"min-height":"100px"}},{default:l(()=>[e("div",null,[(_(!0),d(T,null,j(o.value,(h,i)=>(_(),se(Xe,{newsItem:o.value[i],key:i},null,8,["newsItem"]))),128))])]),_:1})),[[g,t.value]])])}}});const st=M(at,[["__scopeId","data-v-3f864f60"]]),lt=c=>(D("data-v-f9ed48f0"),c=c(),U(),c),ot={class:"homeauthorlist-wrap"},nt=lt(()=>e("span",{class:"title"},"浏览趋势",-1)),it=N({__name:"HomeTrend",setup(c){const t=f();let o=[],p=[],u=[];const v=async()=>{const h=await ye();h.result_code===0&&(o=h.result.map(i=>i.trend_name),p=h.result.map(i=>i.value_list),o.forEach((i,r)=>{u.push({name:i,type:"line",stack:"Total",data:p[r]})}),g())},g=()=>{if(t.value){const h=Be(t.value),i={tooltip:{trigger:"axis"},legend:{data:o},grid:{left:"0%",right:"1%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},yAxis:{type:"value"},series:u};h.setOption(i)}};return ce(()=>o,()=>{o.length>0&&g()}),F(()=>{v()}),(h,i)=>{const r=R;return _(),d("div",ot,[a(r,null,{default:l(()=>[nt]),_:1}),a(r,{style:{margin:"10px 0 0"}},{default:l(()=>[e("div",null,[e("div",{ref_key:"chart",ref:t,style:{width:"300px",height:"400px"}},null,512)])]),_:1})])}}});const rt=M(it,[["__scopeId","data-v-f9ed48f0"]]);const ct="/assets/Report-1f4bdb0f.svg",Y=c=>(D("data-v-555c49a1"),c=c(),U(),c),_t={class:"articlehomeitem-wrap"},ut={style:{display:"flex"}},dt=["href","title"],pt={key:0,class:"copied",style:{margin:"0 0 0 10px"}},mt=Y(()=>e("span",null,"转载",-1)),ht=[mt],vt={key:1,class:"original",style:{margin:"0 0 0 10px"}},ft=Y(()=>e("span",null,"原创",-1)),gt=[ft],yt={class:"more"},wt=["src"],xt={style:{margin:"6px 6px 0 0"}},Lt=["src"],kt=Y(()=>e("span",null,"举报",-1)),$t={class:"article-major"},It=["href","title"],bt={style:{display:"flex"}},Ht=["href"],Et=["src"],St={style:{"margin-left":"20px"}},Ct={class:"author-name"},Bt={class:"article-num",style:{"margin-left":"10px"}},At={class:"author-university",style:{"margin-left":"10px"}},Mt={class:"author-signature"},Nt={style:{margin:"3px 0 0"}},Rt={style:{margin:"3px 0 0"}},Tt={style:{margin:"3px 0 0"}},jt={style:{margin:"3px 0 0"}},Dt={class:"article-uploaddate"},Ut={key:0,style:{"margin-left":"20px"}},Ft=N({__name:"ArticleHomeItem",props:{articleList:{}},setup(c){const t=c,{userStore:o}=fe(),p=f(0),u=f(0),v=f(t.articleList.like_num),g=f(t.articleList.collection_num),h=f(t.articleList.share_num);let i=t.articleList.cover_image,r=t.articleList.article_id,y=t.articleList.article_status,w=t.articleList.article_title,$=t.articleList.article_major,S=t.articleList.article_labels,x=t.articleList.article_introduce,C=ne(t.articleList.article_updatedate),I=t.articleList.author_id,z=t.articleList.author_headphoto,K=t.articleList.author_name,Q=t.articleList.author_signature,W=t.articleList.author_university,Z=t.articleList.author_article_num,q=t.articleList.comment_num;ce(()=>t.articleList,(n,L)=>{r=n.article_id,y=n.article_status,w=n.article_title,$=n.article_major,S=n.article_labels,x=n.article_introduce,C=ne(n.article_updatedate),z=n.author_headphoto,K=n.author_name,Q=n.author_signature,W=n.author_university,v.value=n.like_num,g.value=n.collection_num,h.value=n.share_num,q=n.comment_num,Z=n.author_article_num},{immediate:!0});const J=H(()=>{const n=new Date,L=n.getFullYear(),B=n.getMonth()+1,A=n.getDate(),P=B>9?B:"0"+B,k=A<10?"0"+A:A;return L+"-"+P+"-"+k}),_e=H(()=>i?"80%":"100%"),ue=H(()=>$.join("-")),X=H(()=>window.location.origin+"/articleHome/"+r),de=H(()=>window.location.origin+"/personalCenter/"+I),pe=async()=>{o.isLogin?p.value!==1?(p.value=1,v.value++,await le({article_id:r,user_id:o.userInfo.user_id,update_date:J.value,action_type:0}),b({message:"点赞成功"}),I!==o.userInfo.user_id&&await te({receiver_id:I,type:1,content:`<span> 您的文章<a href="https://littlesharing.cn/articleHome/${r}" target="_blank"> ${w} </a>被点赞了 </span>`})):(p.value=0,v.value--,await le({article_id:r,action_type:1,user_id:o.userInfo.user_id}),b({message:"取消点赞"})):b({message:"请先进行登录哦~"})},me=async()=>{o.isLogin?u.value!==1?(u.value=1,g.value++,await oe({article_id:r,user_id:o.userInfo.user_id,update_date:J.value,action_type:0}),b({message:"收藏成功"}),I!==o.userInfo.user_id&&await te({receiver_id:I,type:1,content:`<span> 您的文章<a href="https://littlesharing.cn/articleHome/${r}" target="_blank"> ${w} </a>被收藏了 </span>`})):(u.value=0,g.value--,await oe({article_id:r,action_type:1,user_id:o.userInfo.user_id}),b({message:"取消收藏"})):b({message:"请先进行登录哦~"})},he=()=>{ke.alert(window.location.origin+"/articleHome/"+r,"点击确定复制链接",{confirmButtonText:"确定",callback:()=>{h.value++,navigator.clipboard.writeText(window.location.origin+"/articleHome/"+r).then(()=>{b({type:"info",message:"复制成功！请尽快转发哦~"})})}})};return F(async()=>{if(o.isLogin){const n=await Ae();n.result_code===0&&(p.value=n.result.includes(r)?1:0);const L=await Me({user_id:o.userInfo.user_id});L.result_code===0&&(u.value=L.result.includes(r)?1:0)}}),(n,L)=>{const B=$e,A=Ie,P=be,k=R,V=He,ve=Ee;return _(),d("div",_t,[e("div",{style:Le({width:_e.value})},[a(k,{type:"flex",justify:"space-between"},{default:l(()=>[e("div",ut,[e("a",{class:"title",href:X.value,target:"_blank",title:s(w)},[e("span",null,m(s(w)),1)],8,dt),s(y)===1?(_(),d("div",pt,ht)):E("",!0),s(y)===2?(_(),d("div",vt,gt)):E("",!0)]),a(P,null,{dropdown:l(()=>[a(A,null,{default:l(()=>[a(B,{command:"1",style:{display:"flex"}},{default:l(()=>[e("div",xt,[e("img",{src:s(ct),alt:"Report"},null,8,Lt)]),kt]),_:1})]),_:1})]),default:l(()=>[e("div",yt,[e("img",{src:s(we),alt:"More"},null,8,wt)])]),_:1})]),_:1}),a(k,{type:"flex",style:{"margin-top":"10px"}},{default:l(()=>[e("div",$t,[e("span",null,m(ue.value),1)]),(_(!0),d(T,null,j(s(S),(G,ee)=>(_(),d("div",{class:"article-labels",key:ee},[e("span",null,m(s(S)[ee]),1)]))),128))]),_:1}),a(k,null,{default:l(()=>[e("a",{class:"article-introduce",href:X.value,target:"_blank",title:s(x)},[e("span",null,m(s(x)),1)],8,It)]),_:1}),a(k,{type:"flex",justify:"space-between",style:{width:"100%"}},{default:l(()=>[e("div",bt,[e("a",{class:"author-head",href:de.value},[e("img",{src:s(z),alt:"author_head"},null,8,Et)],8,Ht),e("div",St,[a(k,{type:"flex"},{default:l(()=>[e("span",Ct,m(s(K)),1),e("div",Bt,[e("span",null,"该用户已发表"+m(s(Z))+"篇文章",1)]),e("div",At,[e("span",null,m(s(W)),1)])]),_:1}),a(k,{style:{margin:"5px 0 0"}},{default:l(()=>[e("span",Mt,m(s(Q)),1)]),_:1})])]),e("div",null,[a(k,{type:"flex",class:"action-list"},{default:l(()=>[e("div",null,[e("div",{onClick:L[0]||(L[0]=G=>pe())},[a(Ne,{likemark:p.value},null,8,["likemark"])]),e("div",Nt,[e("span",null,m(v.value),1)])]),e("div",null,[e("div",{onClick:L[1]||(L[1]=G=>me())},[a(Re,{collectionmark:u.value},null,8,["collectionmark"])]),e("div",Rt,[e("span",null,m(g.value),1)])]),e("div",null,[e("div",{onClick:L[2]||(L[2]=G=>he())},[a(Te)]),e("div",Tt,[e("span",null,m(h.value),1)])]),e("div",null,[e("div",null,[a(je)]),e("div",jt,[e("span",null,m(s(q)),1)])])]),_:1}),a(k,{style:{margin:"10px 0 0"},type:"flex"},{default:l(()=>[e("span",Dt,"最后更新时间："+m(s(C)),1)]),_:1})])]),_:1})],4),s(i)?(_(),d("div",Ut,[a(ve,{placement:"left",width:400,trigger:"hover"},{reference:l(()=>[a(V,{src:s(i),alt:s(i),style:{"max-width":"200px","max-height":"150px","border-radius":"20px"}},null,8,["src","alt"])]),default:l(()=>[a(V,{src:s(i)},null,8,["src"])]),_:1})])):E("",!0)])}}});const Pt=M(Ft,[["__scopeId","data-v-555c49a1"]]),Gt={class:"index"},Ot={style:{"margin-right":"30px"}},Yt={class:"loading-mask"},zt={key:0},Kt={key:0,class:"homearticlelist-warp"},Qt={key:1},Wt=N({__name:"index",setup(c){De({title:"littleSharing-兴趣使然的博客小站",meta:[{name:"description",content:"一个以Markdown为主要沟通形式的知识分享社区。"},{name:"keywords",content:"littleSharing,博客,小站,前端,后端,全栈,技术分享,技术博客,个人博客,个人网站,个人主页,前端博客,后端博客,全栈博客,前端技术分享,后端技术分享,全栈技术分享,前端技术博客,后端技术博客,全栈技术博客,前端个人博客,后端个人博客,全栈个人博客,前端个人网站,后端个人网站,全栈个人网站,前端个人主页,后端个人主页,全栈个人主页"},{name:"author",content:"nonhana"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"charset",content:"utf-8"}]});const t=f([]),o=f([]),p=f(!0),u=f(!1),v=f(5),g=f(1),h=f(!1),i=async y=>{u.value=!0,p.value=!1,t.value=y,await O(),u.value=!1,p.value=!0},r=async()=>{if(h.value)return;if(document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight-10&&!u.value){u.value=!0,g.value+=1;const w=await ae({page:g.value});if(w.result_code===0){if(w.result.length===0){b.info("没有更多文章了哦~"),u.value=!1,h.value=!0;return}t.value=t.value.concat(w.result),v.value=t.value.length}await O(),u.value=!1}};return F(async()=>{window.addEventListener("scroll",r),u.value=!0;const y=await ae({});y.result_code===0&&(o.value=y.result,t.value=o.value),await O(),u.value=!1}),Se(()=>{window.removeEventListener("scroll",r)}),(y,w)=>{const $=R,S=Ce,x=re;return _(),d("div",Gt,[a($,{style:{margin:"0 auto",width:"1350px"}},{default:l(()=>[a(xe,{"article-list-all":o.value,onSendArticleList:i},null,8,["article-list-all"])]),_:1}),a($,{style:{margin:"30px auto 0",width:"1350px"},type:"flex",justify:"center"},{default:l(()=>[e("div",Ot,[a($,null,{default:l(()=>[a(rt)]),_:1}),a($,{style:{"margin-top":"30px"}},{default:l(()=>[a(st)]),_:1})]),ie((_(),d("div",Yt,[t.value.length!==0?(_(),d("div",zt,[p.value?(_(),d("ul",Kt,[(_(!0),d(T,null,j(v.value>t.value.length?t.value.length:v.value,C=>(_(),d("li",{key:C},[a(Pt,{"article-list":t.value[C-1]},null,8,["article-list"])]))),128))])):E("",!0)])):E("",!0),t.value.length===0?(_(),d("div",Qt,[a(S,{style:{width:"998px"},description:"暂未搜索到该分类的文章哦......"})])):E("",!0)])),[[x,u.value]])]),_:1})])}}});const ra=M(Wt,[["__scopeId","data-v-6047cd77"]]);export{ra as default};
